# DATAâ€‘JSON.md â€“ Reference for the SPA build artefactsÂ Â *(buildÂ v0.6.2Â Â·Â 2025â€‘04â€‘18)*

> These four static files are generated by `scripts/build_data.py`  
> and shipped in **`dist/data/`**. The React SPA fetches them at runtime. îˆ€citeîˆ‚turn6file1îˆ

| File | Format | Typical sizeÂ \* | Records | Purpose |
|------|--------|-----------------|---------|---------|
| **`entries.ndjson`** | NDJSON (1Â objectÂ /Â line) | **â‰ˆÂ 6.9Â MB**Â (gzipÂ â‰ˆÂ 460Â kB) | 20Â 576 lines | Textâ€‘centric master dataset for search & entry view. |
| **`index.json`** | LunrÂ v2 serialisation | â‰ˆÂ 13.7Â MBÂ (gzipÂ â‰ˆÂ 1.1Â MB) | 20Â 576 docs | Inâ€‘browser fullâ€‘text index. |
| **`graph.json`** | plain JSON | **â‰ˆÂ 210Â kB**Â (gzipÂ â‰ˆÂ 16Â kB) | 20Â 576 nodesÂ /Â **â‰ˆÂ 12Â 300** edges | Lemmaâ€‘variantâ€‘xref network. |
| **`symbols.json`** | JSON array | â‰ˆÂ 23Â kBÂ (gzipÂ â‰ˆÂ 7Â kB) | 294 glyphs | Symbol gallery: glyphÂ â†’ entry IDs & counts. |

\*Â Typical sizes of the uncompressed files produced on 18Â AprÂ 2025; gzip sizes refer to the production bundle.

---

## 1â€‚`entries.ndjson`

One selfâ€‘contained JSON object per line â€“ ideal for streaming or CLI processing (`jq`, `awk`).  
Every field is UTFâ€‘8; no control characters.

```jsonc
{
  "id": "sommerhoff1701-Calcaria~dup1",   // xml:id or @n; ~dup# if @n repeats
  "source": "sommerhoff",                 // "ruland" | "sommerhoff"
  "lemma": "Calcaria",
  "lemma_norm": "calcaria",
  "variants": "kalk kalch",               // spaceâ€‘joined variant tokens
  "translations": "",                     // German glosses (may be empty)
  "definition": "â€¦",                      // full <def> text
  "symbols": ["lime"],                    // glyph ids from <g ref="#â€¦">
  "glyphs": "ğŸœ›",                          // printable symbols (concat)
  "page": "31",                           // first preceding <pb>@n
  "facs": "#img_0031",                    // matching facsimile zone id
  "section": "lat-de",                    // Sommerhoff half; null for Ruland
  "translations_lang": "",                // ISOÂ 639â€‘1 (de)
  "definition_lang": "la",                // ISOÂ 639â€‘1 (la)
  "xrefs": ["Ã†s_d"]                       // explicit <ref>/<xr> targets
}
```

### Field glossary

| Field | Type | Notes |
|-------|------|-------|
| `id` | string | Prefer `xml:id`; else `@n`; duplicate @nÂ â†’Â `~dup1`, `~dup2` â€¦ |
| `source` | string | Originating TEI file (`ruland` / `sommerhoff`). |
| `lemma`,Â `lemma_norm` | string | Original headword and normalised ASCII form. |
| `variants` | string | Spaceâ€‘separated tokens from all `<formÂ type='variant'>`. |
| `translations` | string | Concatenated German `<citÂ type='translation'>`. |
| `definition` | string | Concatenated `<def>` bodies. |
| `symbols` | array\<string> | Glyph ids referenced in the entry (may be empty). |
| `glyphs` | string | Printable Unicode for quick preview/filter. |
| `page`,Â `facs` | string | Pagination & facsimile link from the first preceding `<pb>`. |
| `section` | `"lat-de"`\|`"de-lat"`\|`"unknown"`\|`null` | Sommerhoff half. |
| `translations_lang`,Â `definition_lang` | string | ISO 639â€‘1 language tags. |
| `xrefs` | array\<string> | Targets from `<ref>` / `<xr>` and â€œvide â€¦â€ heuristics. |

---

## 2â€‚`index.json`

A **LunrÂ v2** inverted index serialised for the browser â€“ treated as an opaque blob:

```js
import lunr from "lunr";
const idx = lunr.Index.load(await (await fetch("/data/index.json")).json());
const hits = idx.search("calcaria");
```

Indexed fields: `lemma`, `lemma_norm`, `variants`, `translations`, `definition`.  
Reference field: `id`.

---

## 3â€‚`graph.json`

Topology for synonym/crossâ€‘reference exploration (e.g. export to Gephi).

```jsonc
{
  "v": "2025â€‘04â€‘18",
  "nodes": [
    { "id": "ruland:57", "label": "Aqua fortis", "source": "ruland", â€¦ }
  ],
  "edges": [
    { "source": "ruland:57", "target": "aqua fortis", "type": "variant" },
    { "source": "sommerhoff:8935", "target": "ruland:57", "type": "xref" }
  ]
}
```

### Edge semantics

| `type` | Meaning |
|-------|---------|
| `variant` | NodeÂ â†’Â normalised variant token (unidirectional). |
| `xref` | Explicit `<ref>` / `<xr>` or â€œvideÂ â€¦â€ reference (sourceÂ â†’Â targetÂ id). |

*Every `source`/`target` exists in `nodes` or is a plain string token.*

---

## 4â€‚`symbols.json`

Metadata powering the **Symbols** explorer.

```jsonc
[
  {
    "id": "lime",
    "glyph": "ğŸœ›",
    "entries": ["sommerhoff1701-Calcaria~dup1", "sommerhoff1701-Calcaria"],
    "count": 2
  },
  â€¦
]
```

* Ordered descending by `count` â†’ frontâ€‘end can render directly.  
* If `glyph` is empty, show a â–¢ placeholder or sprite fallback.

---

## 5â€‚Crossâ€‘file relationships

* `entries.ndjson.symbols`Â â†”Â **`symbols.json.id`** (1Â :Â *).  
* `graph.json.nodes.id` is always present in `entries.ndjson.id`.  
* `index.json` uses the same `id` keys, so a Lunr hit resolves directly to an entry.

---